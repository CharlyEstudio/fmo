<div class="row">

    <div class="container-fluid">

        <div>

            <app-morosidad-bitacora></app-morosidad-bitacora>

        </div>

        <div class="alert alert-warning" *ngIf="esperar">

            Obteniendo Comentarios del día

        </div>

        <div class="alert alert-success" *ngIf="ventas">

            No hay registros de comentarios y/o notas.

        </div>

        <div class="table-responsive" *ngIf="respuestaGeneral">

            <h2 class="text-center">Comentarios del Día {{ fecha | date }}</h2>

            <table class="table table-hover table-striped table-bordered" cellspacing="0" role="grid" aria-describedby="comentarios" style="width: 100%;">

                <thead>

                    <tr role="row">

                        <th class="text-center">Hora</th>

                        <th class="text-center"></th>

                        <th class="text-left">Responsable</th>

                        <th class="text-center">Número</th>

                        <th class="text-left">Nombre</th>

                        <th class="text-left">Comentario</th>

                        <th class="text-left">Ver</th>

                    </tr>

                </thead>

                <tbody>

                    <tr role="row" class="odd" *ngFor="let com of comentarios">

                        <td class="text-center centrar">

                            {{ com.hora }}

                        </td>

                        <td class="text-center centrar">

                            <img [src]="com.usuario.img | imagen" width="50" class="rounded-circle" />

                        </td>

                        <td class="text-left centrar">

                            {{ com.usuario.nombre }}

                        </td>

                        <td class="text-center centrar">

                            {{ com.numero }}

                        </td>

                        <td class="text-left centrar">

                            {{ com.nombre }}

                        </td>

                        <td class="text-left centrar">

                            {{ com.comentario }}

                        </td>

                        <td class="text-center centrar">

                            <a href="#modalFolio" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" (click)="openModal(com)">

                                <i class="mdi mdi-comment-text-outline"></i>

                            </a>

                        </td>

                    </tr>

                </tbody>

            </table>

        </div>

    </div>

</div>

<div id="modalFolio" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="modalFolio" aria-hidden="true">

    <div class="modal-dialog modal-lg">

        <div class="modal-content p-t-20 p-b-20 p-l-20 p-r-20">

            <div class="modal-header">

                <h5 class="p-b-10 p-t-10">Historial del Cliente <b># {{ numero }} {{ nombre }}</b></h5>

                <h5 class="p-b-10 p-t-10 text-danger font-weight-bold">Saldo <b>{{ saldo | currency }}</b></h5>

                <!--<button class="btn btn-success" type="button" (click)="descargar(actual)"><i class="mdi mdi-file-excel"></i>Descargar</button>-->

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        
                    <span aria-hidden="true">&times;</span>
        
                </button>

            </div>

            <div class="modal-body">

                <div class="card" style="width: 100%;">

                    <div class="card-body">

                        <h4 class="card-title" *ngIf="charlaBol">Comentarios Recientes</h4>

                        <h4 class="card-title" *ngIf="!charlaBol">No hay Comentarios</h4>

                        <div class="chat-box" *ngIf="charlaBol">

                            <!--chat Row -->
                            <ul class="chat-list" style="overflow-y: scroll; height: 400px;">

                                <!--chat Row -->
                                <li *ngFor="let c of charla; let i = index" [ngClass]="{'reverse': id === c.usuario._id, '': id !== c.usuario._id}">

                                    <div class="chat-img" *ngIf="id !== c.usuario._id"><img [src]="c.usuario.img | imagen"></div>

                                    <div class="chat-content">

                                        <h5>{{ c.usuario.nombre }}</h5>

                                        <div class="box" [ngClass]="{'bg-light-inverse': id === c.usuario._id, 'bg-light-info': id !== c.usuario._id}">{{ c.comentario }}</div>

                                    </div>

                                    <div class="chat-time">{{ c.hora }} <br> {{ c.fecha | date }}</div>

                                </li>

                            </ul>

                        </div>

                    </div>

                    <div class="card-body b-t">

                        <form #f="ngForm">

                            <div class="row">

                                <div class="col-8">

                                    <textarea [(ngModel)]='comentario' name="comentario" [value]="comentario" placeholder="Coloca un mensaje a este folio" class="form-control b-0"></textarea>

                                </div>

                                <div class="col-4 text-right">

                                    <button type="button" class="btn btn-info btn-circle btn-lg" (click)="enviarComentario(f, id)"><i class="fa fa-paper-plane-o"></i> </button>

                                </div>

                            </div>

                        </form>

                    </div>

                </div>

            </div>

        </div>

    </div>

</div>